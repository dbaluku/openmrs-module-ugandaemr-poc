<htmlform formName="HIV Clinical Assessment"
          formDescription="A visit for a client for clinical assessment "
          formEncounterType="8d5b2be0-c2cc-11de-8d13-0010c6dffd0f"
          formUuid="12de5bc5-352e-4faf-9961-a2125085a75c"
          formVersion="3.0"
          formAddMetadata="yes"
          formUILocation="patientDashboard.visitActions"
          formOrder="0"
          formIcon="icon-medkit"
          formShowIf="(visit.active || !visit.active) &amp;&amp; patient.person.dead==false &amp;&amp; sessionLocation.uuid=='86863db4-6101-4ecf-9a86-5e716d6504e4'"
          formDisplayStyle="Standard">
    <ifMode mode="ENTER,EDIT" include="false">
        <includeIf velocityTest="$fn.allEncounters('8d5b27bc-c2cc-11de-8d13-0010c6dffd0f').size() == 0">
            <script>
                jq(function () {
                    jq().toastmessage('showErrorToast', "This patient has no Summary page");
                    alert('This patient has no Summary page, you will now be forwarded to the patient dashboard');

                    /*
                    * queryParameters -> handles the query string parameters
                    * queryString -> the query string without the fist '?' character
                    * re -> the regular expression
                    * m -> holds the string matching the regular expression
                    */
                    var queryParameters = {}, queryString = location.search.substring(1),
                        re = /([^&amp;=]+)=([^&amp;]*)/g, m;

                    // Creates a map with the query string parameters
                    while (m = re.exec(queryString)) {
                        queryParameters[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
                    }

                    /*
                    * Replace the query portion of the URL.
                    * jQuery.param() -> create a serialized representation of an array or
                    * object, suitable for use in a URL query string or Ajax request.
                    */
                    location.href = window.location.protocol + "//" + window.location.host +
                        '/' + OPENMRS_CONTEXT_PATH + '/coreapps/clinicianfacing/patient.page?patientId='
                        + queryParameters['patientId']; // Causes page to reload
                });
            </script>
        </includeIf>
    </ifMode>
    <!-- jquery loaded for nonessential purposes. -->

    <style>
        .nav-link-1 {
            background-color: #015f6b;
        }

        .nav-pills .nav-link.active, .nav-pills .show > .nav-link {
            color: #FFFFFF;
            background-color: #000000;
            border-radius: 5px;
        }

        form .lablex2 span {
            min-width: 50%;
            float: left;
            margin: 1px 0px;
        }

        form .lablex3 span {
            min-width: 31%;
            float: left;
            margin: 1px 0px;
        }

        form .lablex4 span {
            min-width: 25%;
            float: left;
            margin: 1px 0px;
        }

        a {
            color: #f9f9f9;
            text-decoration: none;
        }

        i a {
            color: #f9f9f9;
            text-decoration: none;
        }

        .nav-tabs .nav-link {
            border: 1px solid #02aec3;
            border-top-left-radius: .25rem;
            border-top-right-radius: .25rem;
            color: blue
        }

        #final-out-come {
            margin-top: 26px;
        }

        .customSubmit {
            font-weight: bold;
            width: 70%;
        }

        .submission-section {
            width: 100%;
            align-items: center;

        }

        .encounter-details {
            margin-top: 68px;
            margin-left: 120px;
            width: 70%;
        }

        .submitButton {
            width: 50%;
        }

        form select[disabled], .form select[disabled] {
            background: #EEE;
            border: #1dacbd 1px solid;
            color: #060606;
            font-style: normal;
        }

        form select, .form select {
            min-width: 100%;
            max-width: 100%;
        }

        form input {
            min-width: 100%;
            max-width: 100%;
        }

        .add-more-link {
            color: dodgerblue;
        }

        .remove-more-link {
            color: darkred;
        }


    </style>
    <script type="text/javascript">
        if (jQuery) {
            jq(document).ready(function () {
                $allRows = jq(this).find('.multi-drug');
                $allRows.hide();
                jq('#1-removeEntry').remove();
                jq('#10-addEntry').remove();
                jq('#1-toggleContainer').show();

                jq('#11-removeEntry').remove();
                jq('#20-addEntry').remove();
                jq('#11-toggleContainer').show();
            });


            jq(document).ready(function () {
                jq('.addEntry').on("click", function () {
                    var correctedAddButtonId = parseFloat(this.id) + 1;
                    var contentAddId = "#" + correctedAddButtonId + "-toggleContainer";
                    jq(contentAddId).toggle(true);
                    jq('#' + this.id).toggle(false);
                    jq('#' + parseFloat(this.id) + '-removeEntry').toggle(true);
                    return false;
                });
            });

            jq(document).ready(function () {
                jq('.removeEntry').on("click", function () {
                    var correctedRemoveButtonId = parseFloat(this.id) - 1;
                    var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer";
                    jq(contentAddId).toggle(false);
                    jq(':input:not(:button)', contentAddId).val([]);
                    jq('#' + correctedRemoveButtonId + '-addEntry').toggle(true);
                    jq('#' + correctedRemoveButtonId + '-removeEntry').toggle(true);

                    return false;
                });

            });
        }
    </script>
    <script type="text/javascript">
        function enable_disable(field, class_name_prefix, conditions, input_type) {

            var class_name = jq(field).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));
            var childClass = "Child" + class_id;

            var disable = true;
            var requires = true;

            var row = '[class^="' + class_name_prefix + '"][class*="' + childClass + '"]';

            var selected_value = null;

            if (input_type == "select") {
                selected_value = jq(field).find(":selected").text().trim().toLowerCase();
            } else if (input_type == "hidden") {
                selected_value = jq(field).find("input[type=hidden]").val().trim().toLowerCase();
            }


            if (eval(conditions)) {
                disable = false;
            }


            jq(row).each(function () {
                var group = jq(this);

                if (class_name.indexOf('Child') == -1) {
                    /*group.find("input").attr("value", ""); */
                    group.find("input").attr("required", requires);
                    /* group.find('select').prop("selectedIndex", 0);*/
                    group.find("input").attr("disabled", disable);
                    group.find('select').attr("disabled", disable);

                    if (disable) {
                        /* fade out the fields that are disabled */
                        group.find("input").fadeTo(250, 0.25);
                        group.find("select").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields */
                        group.find("input").fadeTo(250, 1);
                        group.find("select").fadeTo(250, 1);
                    }
                }
            });
        }


        function enable_disable_district_tb_reg(selected_option) {

            var class_name = jq(selected_option).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length))

            var row_id = class_id;

            var disable = true;
            var requires = false;

            var row_1 = '[class^="DistrictTbReg"][class*="Child1"]';

            var xx = row_1;
            var selected_value = jq(selected_option).find(":selected").attr("value");

            if (selected_value == "90071") {
                disable = false;
                requires = true;
            }

            switch (row_id) {
                case 1:
                    xx = row_1;
                    break;
            }


            jq(xx).each(function () {
                var group = jq(this);

                if (class_name.indexOf('Child') == -1) {
                    /* group.find("input").attr("value", ""); */
                    group.find("input").attr("required", requires);
                    /* group.find('select').prop("selectedIndex", 0); */
                    group.find("input").attr("disabled", disable);
                    group.find('select').attr("disabled", disable);
                    if (requires == false) {
                        group.find('.required').show();
                    } else if (requires == true) {
                        group.find('.required').hide();
                    }

                    if (disable) {
                        /* fade out the fields that are disabled */
                        group.find("input").fadeTo(250, 0.25);
                        group.find("select").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields */
                        group.find("input").fadeTo(250, 1);
                        group.find("select").fadeTo(250, 1);
                    }

                }
            });
        }


        if (jQuery) {

            var instabilityCause = "";

            function diff_months(dt2, dt1) {
                var diff = (dt2.getTime() - dt1.getTime()) / 1000;
                diff /= (60 * 60 * 24 * 7 * 4);
                return Math.abs(Math.round(diff));
            }


            jq(document).ready(function () {
                //Block Multiple encounter entry on same date
                blockEncounterOnSameDateEncounter(jq("#encounterDate").find("input[type=hidden]"), "block");

                var stableArray = [];

                var previousVl = jq("#vl").text().trim();
                var currentRegimen = jq("#regimen").text().trim();
                var regimenBeforeDTG = jq("#regimen_before_dtg").text().trim();
                var onThirdLine = jq("#on_third_line").text().trim();
                var adherence = jq("#adherence").text().trim();
                var clinicStaging = jq("#clinic_staging").text().trim();
                var regimenStartedDate = jq("#regimen_started_date").text().trim();
                var regimenBeforeDTGStartedDate = jq("#regimen_started_date_before_dtg").text().trim();
                var sputumDate = jq("#sputum_date").text().trim();
                var artStartDate = jq("#art_start_date").text().trim();
                var teatmentStartDate = jq("#teatment_start_date").text().trim();
                var sputumValue = jq("#sputum_value").text().trim();
                var currentRegimenStartDate = jq("#current_regimen_start_date").text().trim();

                if (regimenBeforeDTG &amp;&amp; regimenBeforeDTG !== "") {
                    regimenStartedDate = regimenBeforeDTGStartedDate;
                }

                var durationOnART;
                var durationOnCurrentRegimen;

                if (artStartDate !== "") {
                    durationOnART = diff_months(new Date(artStartDate), new Date(jq("#encounterDate").find("input[type=hidden]").val()));
                    jq("#99024 input").val(durationOnART);
                }

                if (currentRegimenStartDate !== "") {
                    durationOnCurrentRegimen = diff_months(new Date(currentRegimenStartDate), new Date(jq("#encounterDate").find("input[type=hidden]").val()));
                    jq("#99025 input").val(durationOnCurrentRegimen);
                }

                fieldHelper.makeReadonly(jq("#99025 input"));
                fieldHelper.makeReadonly(jq("#99024 input"));


                disableContainer("#165144");

                stabilityCheck();


                /* Validation of the ART regimen Selected */
                jq("#90315").change(function () {
                    var regimen_encounter_page_value = jq("#90315").find("select").find(":selected").val();
                    var regimen_encounter_page_text = jq("#90315").find("select").find(":selected").text();
                    var art_transfer_regimen = jq("#artTransferRegimen").html();
                    var other_art_transfer_regimen = jq("#otherArtTransferRegimen").html();
                    var art_start_regimen = jq("#artStartRegimen").html();
                    var other_art_start_regimen = jq("#otherArtStartRegimen").html();
                    var first_second_regimen = jq("#firstSecondLineRegimen").html();
                    var other_first_second_regimen = jq("#otherFirstSecondLineRegimen").html();
                    var third_second_regimen = jq("#thirdLineRegimen").html();
                    var other_third_regimen = jq("#otherThirdLineRegimen").html();
                    var patient_regimen = other_third_regimen + third_second_regimen + other_first_second_regimen + other_first_second_regimen + first_second_regimen + other_art_start_regimen + art_start_regimen + other_art_transfer_regimen + art_transfer_regimen;

                    /* Check if  Patient has art start or tranfer regimen selected on ART Summary Page*/
                    if (art_start_regimen == "null" &amp;&amp; art_transfer_regimen == "null") {
                        jq().toastmessage('showNoticeToast', "Patient Doesn't have any either ART Start or Transfer regimen on ART Summary selected");
                    }

                    if (!patient_regimen.includes(regimen_encounter_page_value)) {
                        jq().toastmessage('showNoticeToast', "The regimen" + regimen_encounter_page_text + "you have selected is different from the current regimen in the Summary page. Please update the summary page with a switch/substitution to the selected regimen");
                    }

                    if (currentRegimen !== jq("#90315").find("select").find(":selected").val()) {
                        jq("#99025 input").val(0);
                    } else {
                        jq("#99025 input").val(durationOnCurrentRegimen);
                    }
                    stabilityCheck();
                });
                /* End of Validation */


                jq("#viral-load-results-copies").change(function () {
                    previousVl = jq("#viral-load-results-copies").find("input").val();
                    stabilityCheck();
                });


                // trigger a change when the form loads
                jq("#viral-load-results-qualitative").change();


                jq('[class^="ARTYesNoEnableDisable"]').change(function () {
                    enable_disable(jq(this), "ARTYesNo", 'selected_value == "yes" &amp;&amp; selected_value!=""', "select");
                });

                jq('[class^="ARTYesNoEnableDisable"]').each(function () {
                    enable_disable(jq(this), "ARTYesNo", 'selected_value == "yes" &amp;&amp; selected_value!=""', "select");
                });

                jq('[class^="RegimenEnableDisable"]').change(function () {
                    enable_disable(jq(this), "Regimen", 'selected_value == "other"', "select");
                });

                jq('[class^="RegimenEnableDisable"]').each(function () {
                    enable_disable(jq(this), "Regimen", 'selected_value == "other"', "select");
                });

                jq('[class^="OtherAppointmentReasonEnableDisable"]').change(function () {
                    enable_disable(jq(this), "OtherAppointmentReason", 'selected_value == "14. other specify"', "select");
                });

                jq('[class^="OtherAppointmentReasonEnableDisable"]').each(function () {
                    enable_disable(jq(this), "OtherAppointmentReason", 'selected_value == "14. other specify"', "select");
                });

                jq('[class^="DistrictTbRegEnableDisable"]').change(function () {
                    enable_disable_district_tb_reg(jq(this));
                });

                jq('[class^="DistrictTbRegEnableDisable"]').each(function () {
                    enable_disable_district_tb_reg(jq(this));
                });


                jq('[class^="AdherenceEnableDisable"]').change(function () {
                    enable_disable(jq(this), "Adherence", 'selected_value == "poor" || selected_value=="fair"', "select");
                });

                jq('[class^="AdherenceEnableDisable"]').each(function () {
                    enable_disable(jq(this), "Adherence", 'selected_value == "poor" || selected_value=="fair"', "select");
                });


                jq("#90203").change(function () {
                    clinicStaging = jq(this).find(":selected").val();
                    stabilityCheck();
                })

                jq("#returndate").each(function () {
                    if (jq("#returndate").find("input[type=hidden]").val() != "") {
                        enableContainer("#reason_for_appointment");
                    } else {
                        disableContainer("#reason_for_appointment");
                    }
                });

                jq("#returndate").change(function () {
                    if (jq("#returndate").find("input[type=hidden]").val() != "") {
                        enableContainer("#reason_for_appointment");
                    } else {
                        disableContainer("#reason_for_appointment");
                    }
                });


                jq(".enableDisable").each(function () {
                    var group = jq(this);

                    function disableFn() {
                        group.children("#disabled").fadeTo(250, 0.25);
                        /*  group.children("#disabled").find(":checkbox").attr("checked", false); uncheck */
                        group.children("#disabled").find("input").attr("disabled", true);
                        /* disable */
                        group.children("#disabled").find("select").attr("disabled", true);
                    }

                    function enableFn() {
                        group.children("#disabled").fadeTo(250, 1);
                        group.children("#disabled").find("input").attr("disabled", false);
                        group.children("#disabled").find("select").attr("disabled", false);

                    }

                    if (jq(this).children("#trigger").find(":checkbox:first").attr("checked") != "checked") {
                        disableFn();
                    }

                    jq(this).children("#trigger").find(":checkbox:first").change(function () {
                        var checked = jq(this).attr("checked");
                        if (checked == "checked") {
                            enableFn();
                        } else {
                            disableFn();
                        }
                    });
                });


                function stabilityCheck() {
                    /*Viral Load Check*/

                    stableArray = [];
                    instabilityCause = "";

                    if (previousVl !== "" &amp;&amp; previousVl &lt;= 1000) {
                        stableArray.push(true);
                    } else {
                        stableArray.push(false);
                        instabilityCause = instabilityCause + "Viral Load is Not Suppressed \n ";
                    }

                    /* Third Line*/

                    if (onThirdLine !== "true") {
                        stableArray.push(true);
                    } else {
                        stableArray.push(false);
                        instabilityCause += "Current regimen is a third line regimen \n "
                    }

                    /* Adherence Check*/

                    if (adherence.length &lt;= 0 || adherence.trim().includes("POOR")) {
                        stableArray.push(false);
                        instabilityCause += "Adherence is not Good \n "
                    } else {
                        stableArray.push(true);
                    }

                    /* Clinic staging */
                    if (clinicStaging === "90033" || clinicStaging === "90034" || clinicStaging === "90293" || clinicStaging === "90294") {
                        stableArray.push(true);
                    } else {
                        stableArray.push(false);
                        instabilityCause += "Clinic stage is neither 1 or 2 \n";
                    }
                    var pageCurrentRegimen = jq("#90315").find("select").find(":selected").val();
                    var pageEncounterDate = jq("#encounterDate").find("input[type=hidden]").val();
                    var dsdmRegimenCoceptsIds = "164976,164977,164978,164979";

                    if (currentRegimen !== "" &amp;&amp; (currentRegimen === pageCurrentRegimen || dsdmRegimenCoceptsIds.trim().includes(pageCurrentRegimen)) &amp;&amp; diff_months(new Date(pageEncounterDate), new Date(regimenStartedDate)) &gt; 12) {

                        stableArray.push(true);
                    } else {
                        stableArray.push(false);
                        instabilityCause += "Patient has not spent more than 12 moths on current Regiment \n "
                    }

                    if (sputumValue !== "" &amp;&amp; sputumValue !== "664" &amp;&amp; diff_months(new Date(jq("#encounterDate").find("input[type=hidden]").val()), new Date(teatmentStartDate)) &lt; 2) {
                        stableArray.push(false);
                        instabilityCause += "Patient has not been on treatment for TB for at least 2 months"
                    } else {
                        stableArray.push(true);
                    }
                    instabilityCause.trim().replace()

                    if (stableArray.indexOf(false) != -1) {
                        jq("#165144 select").val("90004");
                    } else {
                        jq("#165144 select").val("90003");
                    }

                }
            });


            <!-- Validation rules -->
            beforeSubmit.push(function () {
                <!-- clear the previous errors -->
                setValue('returndate.error', '');

                var encounterDate = new Date((getValue('encounterDate.value')));
                var returnDate = new Date((getValue('returndate.value')));

                if (encounterDate &gt;= returnDate) {
                    getField('returndate.error').html('The return date must be after the date of this visit ' +
                        formatDateForDisplay(encounterDate)).show();
                    return false;
                }

                <!-- Check that the return date is before the transfer out date only if there is a transfer out date -->
                if (jq('#transfer_out_date_id').html().replace(/\s+/, "").length > 0) {
                    var transfer_out_date_id = new Date(jq('#transfer_out_date_id').html());
                    if (returnDate &gt;= transfer_out_date_id) {
                        getField('returndate.error').html('The return date must be before the transfer out date of ' +
                            formatDateForDisplay(transfer_out_date_id)).show();
                        return false;
                    }
                    return false;
                }


                /** The date the viral load was taken cannot be after the encounter date */

                /* If the viral load is detected, the number of copies must be greater than 20 which is the lowest detectable level for a machine */

                /* if DSDM is not FBIM or FTR or Empty and patient is not stable should not save.*/
                if (jq("#165144").find("select").find(":selected").val() !== "90003" &amp;&amp; (jq("#165143").find("select").find(":selected").val() !== "165138" &amp;&amp; jq("#165143").find("select").find(":selected").val() !== "165140" &amp;&amp; jq("#165143").find("select").find(":selected").val() !== "")) {
                    getField('165143.error').html('Patient Not Stable due to ' + instabilityCause + '. \n Only Stable Patients can be enrolled in ' + jq("#165143").find("select").find(":selected").text()).show();

                    jq().toastmessage('showErrorToast', " Patient Not Stable " + instabilityCause + ". \n Only Stable Patients can be enrolled in " + jq("#165143").find("select").find(":selected").text());
                    return false;
                }

                return true;
            });
        }
    </script>

    <!-- This section contains lookup tags that pick data from other forms-->

    <lookup complexExpression="#set($art_start_regimen='null') #set($other_art_start_regimen='null') #set($art_transfer_regimen='null') #set($other_art_transfer_regimen='null')"/>

    <lookup complexExpression="#set($first_second_line_regimen='null') #set($other_first_second_line_regimen='null')"/>

    <lookup complexExpression="#set($third_line_regimen='null') #set($other_third_line_regimen='null')"/>

    <span style="display: none" id="artStartRegimen"><lookup
            complexExpression="#set($art_start_regimen=($fn.latestObs('99061').valueCoded))$art_start_regimen"/></span>

    <span style="display: none" id="otherArtStartRegimen"><lookup
            complexExpression="#set($other_art_start_regimen=($fn.latestObs('99268').valueText))$other_art_start_regimen"/></span>

    <span style="display: none" id="artTransferRegimen"><lookup
            complexExpression="#set($art_transfer_regimen=$fn.latestObs('99064').valueCoded)$art_transfer_regimen"/></span>

    <span style="display: none" id="otherArtTransferRegimen"><lookup
            complexExpression="#set($other_art_transfer_regimen=$fn.latestObs('99269').valueText)$other_art_transfer_regimen"/></span>

    <span style="display: none" id="firstSecondLineRegimen"><lookup
            complexExpression="#foreach($first_second_line_regimen in $fn.allObs(90315)) $first_second_line_regimen.valueCoded #end"/></span>

    <span style="display: none" id="otherFirstSecondLineRegimen"><lookup
            complexExpression="#foreach($other_first_second_line_regimen in $fn.allObs(99146)) $other_first_second_line_regimen.valueText #end"/></span>


    <span style="display: none" id="thirdLineRegimen"><lookup
            complexExpression="#foreach($third_line_regimen in $fn.allObs(162990)) $first_second_line_regimen.valueCoded #end"/></span>

    <span style="display: none" id="otherThirdLineRegimen"><lookup
            complexExpression="#foreach($other_third_line_regimen in $fn.allObs(162989)) $other_first_second_line_regimen.valueText #end"/></span>


    <!-- This section contains lookup tags that pick data from other forms-->

    <lookup complexExpression="#set($art_start_regimen='null') #set($other_art_start_regimen='null') #set($art_transfer_regimen='null') #set($other_art_transfer_regimen='null')"/>

    <lookup complexExpression="#set($first_second_line_regimen='null') #set($other_first_second_line_regimen='null')"/>

    <lookup complexExpression="#set($third_line_regimen='null') #set($other_third_line_regimen='null')"/>

    <span style="display: none" id="artStartRegimen">
        <lookup
                complexExpression="#set($art_start_regimen=($fn.latestObs('99061').valueCoded))$art_start_regimen"/>
    </span>

    <span style="display: none" id="otherArtStartRegimen">
        <lookup
                complexExpression="#set($other_art_start_regimen=($fn.latestObs('99268').valueText))$other_art_start_regimen"/>
    </span>

    <span style="display: none" id="artTransferRegimen">
        <lookup
                complexExpression="#set($art_transfer_regimen=$fn.latestObs('99064').valueCoded)$art_transfer_regimen"/>
    </span>

    <span style="display: none" id="otherArtTransferRegimen">
        <lookup
                complexExpression="#set($other_art_transfer_regimen=$fn.latestObs('99269').valueText)$other_art_transfer_regimen"/>
    </span>

    <span style="display: none" id="firstSecondLineRegimen">
        <lookup
                complexExpression="#foreach($first_second_line_regimen in $fn.allObs(90315)) $first_second_line_regimen.valueCoded #end"/>
    </span>

    <span style="display: none" id="otherFirstSecondLineRegimen">
        <lookup
                complexExpression="#foreach($other_first_second_line_regimen in $fn.allObs(99146)) $other_first_second_line_regimen.valueText #end"/>
    </span>


    <span style="display: none" id="thirdLineRegimen">
        <lookup
                complexExpression="#foreach($third_line_regimen in $fn.allObs(162990)) $first_second_line_regimen.valueCoded #end"/>
    </span>

    <span style="display: none" id="otherThirdLineRegimen">
        <lookup
                complexExpression="#foreach($other_third_line_regimen in $fn.allObs(162989)) $other_first_second_line_regimen.valueText #end"/>
    </span>


    <div class="row">
        <div class="col-3">
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                <a class="nav-link  nav-link-1 active active-1" id="v-pills-home-tab" data-toggle="pill"
                   href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">Clinical Encounter
                </a>
                <a class="nav-link nav-link-1" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile"
                   role="tab" aria-controls="v-pills-profile" aria-selected="false">Investigation Reports
                </a>
                <a class="nav-link nav-link-1" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages"
                   role="tab" aria-controls="v-pills-messages" aria-selected="false">Diagnosis
                </a>
                <a class="nav-link nav-link-1" id="v-pills-messages-tab" data-toggle="pill" href="#v-prescriptions"
                   role="tab" aria-controls="v-pills-messages" aria-selected="false">Medication
                </a>
                <a class="nav-link nav-link-1" id="v-pills-messages-tab" data-toggle="pill" href="#v-hiv-programing"
                   role="tab" aria-controls="v-pills-messages" aria-selected="false">Programming ie DSDM
                </a>
                <a class="nav-link nav-link-1" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings"
                   role="tab" aria-controls="v-pills-settings" aria-selected="false">Next Course of Action
                </a>
                <div class="encounter-details" style="margin-top:30px;">
                    <div style="display:none">
                        <label>Encounter Date</label>
                        <encounterDate default="today" disallowMultipleEncountersOnDate="block"/>
                        <encounterLocation id="location_id" default="SessionAttribute:emrContext.sessionLocationId"/>

                    </div>
                    <div class="submission-section" style="align:center;display: none">
                        <encounterProviderAndRole encounterRole="240b26f9-dd88-4172-823d-4a8bfeb7841f"
                                                  required="required" default="currentUser"/>
                    </div>
                    <div class="submission-section" style="align:center;margin-top:10px;">
                        <submit submitStyle="customSubmit" class="confirm" submitLabel="SAVE"
                                style="width:200px; align:center"/>
                        <postSubmissionAction
                                class="org.openmrs.module.ugandaemrpoc.htmlformentry.HIVClinicalAssessmentSubmissionAction"/>
                    </div>
                </div>
            </div>


        </div>
        <div class="col-9">
            <div class="tab-content" id="v-pills-tabContent">
                <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel"
                     aria-labelledby="v-pills-home-tab">
                            <nav>
                                <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                                    <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab"
                                       href="#patient-vitals" role="tab" aria-controls="nav-home" aria-selected="true">
                                        Triage Information
                                    </a>
                                    <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab"
                                       href="#nav-family-planning" role="tab" aria-controls="nav-profile"
                                       aria-selected="false">Pregnancy /Family Planning
                                    </a>
                                    <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab"
                                       href="#nav-contact" role="tab" aria-controls="nav-contact" aria-selected="false">
                                        Examination
                                    </a>

                                    <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab"
                                       href="#nav-investigations" role="tab" aria-controls="nav-contact"
                                       aria-selected="false">
                                        Investigations
                                    </a>
                                </div>
                            </nav>
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="patient-vitals" role="tabpanel"
                                     aria-labelledby="nav-home-tab">
                                    <uiInclude provider="ugandaemrpoc" fragment="vitals"/>
                                </div>
                                <div class="tab-pane fade" id="nav-family-planning" role="tabpanel"
                                     aria-labelledby="nav-profile-tab">
                                    <div class="">
                                        <div class="row">
                                            <excludeIf velocityTest="$patient.gender =='M' || $patient.age &lt; 9">
                                                <div class="col-6">
                                                    <div class="card" style="margin-top:10px">
                                                        <div class="card-header">
                                                            <label>Pregnancy and EmTCT</label>
                                                        </div>
                                                        <div class="card-body">
                                                            <div style="margin-top:10px">
                                                                <div class="row">
                                                                    <div class="col-5">
                                                                        <label>Are you pregnant?</label>
                                                                    </div>
                                                                    <div class="col-7">
                                                                        <obs conceptId="90041" style="checkbox"
                                                                             answerConceptIds="1065,1066"
                                                                             answerLabels="Yes,No"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div style="margin-top:10px">
                                                                <div class="row">
                                                                    <div class="col-5">
                                                                        <label>EDD</label>
                                                                    </div>
                                                                    <div class="col-7">
                                                                        <obs conceptId="5596" allowFutureDates="true"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div style="margin-top:10px">
                                                                <div class="row">
                                                                    <div class="col-5">
                                                                        <label>In EMTCT</label>
                                                                    </div>
                                                                    <div class="col-7">
                                                                        <obs conceptId="90012"
                                                                             answerConceptIds="90003,90004"
                                                                             answerLabels="Yes,No"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div style="margin-top:10px">
                                                                <div class="row">
                                                                    <div class="col-5">
                                                                        <label>Gestation in Weeks</label>
                                                                    </div>
                                                                    <div class="col-7">
                                                                        <obs conceptId="162983"/>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div style="margin-top:10px">
                                                                <div class="row">
                                                                    <div class="col-5">
                                                                        <label>ANC NO.</label>
                                                                    </div>
                                                                    <div class="col-7">
                                                                        <patient field="identifier"
                                                                                 identifierTypeId="b0cc255e-ef57-4266-839e-0df7f5099eb9"
                                                                                 required="false"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </excludeIf>
                                            <div class="col-6">
                                                <div class="card" style="margin-top:10px">
                                                    <div class="card-header">
                                                        <label>Family Planning</label>
                                                    </div>
                                                    <div class="card-body">
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>Family Planning Status</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs id="br" conceptId="90238"
                                                                         answerConceptIds="90082,90081"
                                                                         answerLabels="Yes,No"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="width:100%;text-align:center">
                                                            <h3>Methods</h3>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-12">
                                                                    <obs id="br" conceptId="374" answerConceptId="190"
                                                                         answerLabel="Condoms"/>
                                                                    <excludeIf velocityTest="$patient.gender =='M' ">

                                                                        <obs id="br" conceptId="374"
                                                                             answerConceptId="780"
                                                                             answerLabel="Oral Contraceptive pills"/>
                                                                        <obs id="br" conceptId="374"
                                                                             answerConceptId="5279"
                                                                             answerLabel="Injectable/Implantable hormonies"/>
                                                                        <obs id="br" conceptId="374"
                                                                             answerConceptId="5278"
                                                                             answerLabel="Diaphram/Cervical Cap"/>
                                                                        <obs id="br" conceptId="374"
                                                                             answerConceptId="5275"
                                                                             answerLabel="Intra uterine device (IUD)"/>

                                                                    </excludeIf>
                                                                    <obs id="br" conceptId="374" answerConceptId="99265"
                                                                         answerLabel="Vasectomy/Tubal ligation"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <excludeIf velocityTest="$patient.gender =='M' ">
                                                            <div style="margin-top:10px">
                                                                <div class="row">
                                                                    <div class="col-5">
                                                                        <label>Any intention to conceive in next 3
                                                                            months
                                                                        </label>
                                                                    </div>
                                                                    <div class="col-7">
                                                                        <obs conceptId="165316" answerConceptIds="1065,1066"
                                                                             answerLabels="Yes,No" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div style="margin-top:10px">
                                                                <div class="row">
                                                                    <div class="col-5">
                                                                        <label>CaCx screening</label>
                                                                    </div>
                                                                    <div class="col-7">
                                                                        <obs conceptId="90012"
                                                                             answerConceptIds="90003,90004"
                                                                             answerLabels="Yes,No"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </excludeIf>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="nav-contact" role="tabpanel"
                                     aria-labelledby="nav-contact-tab">
                                    <div class="assesment">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">Presenting Signs and Symptoms</div>
                                                    <div class="card-body">
                                                        <span class="lablex3">
                                                            <repeat with="['90132','Cough'],['90133','DB'],['90128','Dementia'],['90129','Enceph'],['90131','Fever'],['90138','GUD'],['90094','Headache'],['90134','IRIS'],['123','Malaria'],['90127','Pneumonia'],['90137','PID'],['999','RTI'],['90130','Thrush'],['90136','UD'],['90139','Ulcers'],['106 ','URTI'],['90135','Weight loss'],['90126','Zoster'],['507','KS'],['1294','CCM']">
                                                                <obs id="{0}" conceptId="90251" answerConceptId="{0}"
                                                                     answerLabel="{1}" style="checkbox"/>
                                                            </repeat>
                                                            <span id="trigger">
                                                                <obs id="90251" conceptId="90251"
                                                                     answerConceptId="90002"
                                                                     answerLabel="Other specify:"/>
                                                            </span>
                                                            <span id="disabled">
                                                                <obs id="99032" conceptId="99032" size="17"
                                                                     labelText=""/>
                                                            </span>
                                                        </span>

                                                    </div>
                                                </div>
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">Side Effects Of ART</div>
                                                    <div class="card-body">
                                                        <span class="lablex2">
                                                            <repeat with="['90100','AB'],['90099','Anaemia'],['90095','BN'],['90117','CNS'],['90092','Diarrhoea'],['90116','FAT'],['90093','Fatigue'],['90094','Headache'],['90115','Jaundice'],['90091','Nausea'],['90098','Rash']">
                                                                <obs id="{0}" conceptId="90227" answerConceptId="{0}"
                                                                     answerLabel="{1}" style="checkbox"/>
                                                            </repeat>
                                                            <span id="trigger">
                                                                <obs conceptId="90227" answerConceptId="90002"
                                                                     answerLabel="Other specify:"/>
                                                            </span>
                                                            <span id="disabled">
                                                                <obs conceptId="99113" size="17" labelText=""/>
                                                            </span>
                                                        </span>

                                                    </div>
                                                </div>
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">Syphilis status</div>
                                                    <div class="card-body">
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <label>Heb Tested</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <obs conceptId="1271" answerConceptId="1322"
                                                                         answerLabel="Hep B Test" labelText=""/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <label>Heb Result</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <obs conceptId="1322" answerConceptIds="703,664"
                                                                         answerLabels="Positive,Negative" labelText=""/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <label>Syphilis status</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <obs conceptId="99752"
                                                                         answerConceptIds="162848,99756,99755,99754"
                                                                         answerLabels="No Symptoms,Symptomatic Non-Reactive,Symptomatic Reactive, Symptomatic Reactive and treated"
                                                                         labelText=""/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">Advanced Disease and WHO Clinical Stage
                                                    </div>
                                                    <div class="card-body">
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>Advanced Disease Status</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="165272"/>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <lable>WHO Clinical stage</lable>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs id="90203" conceptId="90203"
                                                                         answerConceptIds="90033,90034,90035,90036,90293,90294,90295,90296"
                                                                         answerLabels="1,2,3,4,T1,T2,T3,T4"
                                                                         labelText=""/>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">TB AND TPT</div>
                                                    <div class="card-body">
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>TB Status</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="90216"
                                                                         answerConceptIds="90079,90073,90078,90071"
                                                                         answerLabels="1. No signs,2. Suspect,3. Diagnosed with Tb,4. Tb Rx"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>TPT Status</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="165288"
                                                                         answerConceptIds="1090,90072,165307,90040,160035"
                                                                         answerLabels="Never Initiated,On INH,Defaulted,Taken off due to side effects,Completed"/>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>TPT date initiated</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="165226"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>TPT date completed</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="165227"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="nav-investigations" role="tabpanel"
                                     aria-labelledby="nav-contact-tab">

                                    <div class="row">
                                        <div class="col-4">
                                            <div class="card" style="margin-top:10px">
                                                <div class="card-header">
                                                    <label>Laboratory Tests</label>
                                                </div>
                                                <div class="card-body">
                                                    <div class="investigations">
                                                        <span class="lablex2">
                                                            <repeat with="['165418','CrAg'],['165417','RPR'],['165416','TB LAM'],['165413','GeneXpert'],['165415','Microscopy'],['1019','CBC'],['657','Cd4'],['165412','VL']">
                                                                <obs id="{0}" conceptId="1271" answerConceptId="{0}"
                                                                     answerLabel="{1}" style="checkbox"/>
                                                            </repeat>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="card" style="margin-top:10px">
                                                <div class="card-header">
                                                    <label>Radiology</label>
                                                </div>
                                                <div class="card-body">
                                                    <div class="investigations">
                                                        <span class="lablex2">
                                                            <repeat with="['12','CXR']">
                                                                <obs id="{0}" conceptId="1271" answerConceptId="{0}"
                                                                     answerLabel="{1}" style="checkbox"/>
                                                            </repeat>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-4">
                                            <div class="card" style="margin-top:10px">
                                                <div class="card-header">
                                                    <label>Theater</label>
                                                </div>
                                                <div class="card-body">
                                                    <div class="investigations">
                                                        <span class="lablex2">

                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                </div>
                <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                    <nav>
                        <div class="nav nav-tabs nav-fill" id="investigation-report-tab" role="tablist">
                            <a class="nav-item nav-link active" id="investigation-report-list-tab" data-toggle="tab"
                               href="#investigation-report-list" role="tab" aria-controls="nav-home"
                               aria-selected="true">Report</a>
                            <a class="nav-item nav-link" id="investigation-report-form-tab" data-toggle="tab"
                               href="#investigation-report-form" role="tab" aria-controls="investigation-report-form"
                               aria-selected="false">Capture results</a>
                        </div>
                    </nav>
                    <div class="tab-content" id="investigation-report-tab-tabContent">
                        <div class="tab-pane fade show active" id="investigation-report-list" role="tabpanel"
                             aria-labelledby="investigation-report-list-tab">
                            <uiInclude provider="ugandaemrpoc" fragment="displayResultListOnEncounter"/>
                        </div>
                        <div class="tab-pane fade" id="investigation-report-form" role="tabpanel"
                             aria-labelledby="investigation-report-form-tab">
                            <div class="table" style="margin-top: 10px">
                                <div class="row">

                                    <div class="col-4">
                                        <div class="card">
                                            <div class="card-header">CD4/CD4%</div>
                                            <div class="card-body">
                                                <obsgroup groupingConceptId="657">
                                                    <div>
                                                        <label>CD4 Count</label>
                                                        <obs id="" conceptId="5497"
                                                             allowFutureDates="false"/>
                                                    </div>
                                                    <div>
                                                        <label>CD4%</label>
                                                        <obs id="viral-load-results-qualitative" conceptId="730"
                                                             answerConceptIds="1301,1306,1304"
                                                             answerLabels="Detected,Not Detected, Sample Rejected"/>
                                                    </div>
                                                </obsgroup>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-4">
                                        <div class="card">
                                            <div class="card-header">Crag</div>
                                            <div class="card-body">
                                                <obsgroup groupingConceptId="165418">
                                                    <div>
                                                        <label>CD4 Count</label>
                                                        <obs id="" conceptId="165290"/>
                                                    </div>
                                                </obsgroup>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-4">
                                        <div class="card">
                                            <div class="card-header">Rapid plasma reagin Test (RPR)</div>
                                            <div class="card-body">
                                                <obsgroup groupingConceptId="165417">
                                                    <div>
                                                        <label>RPR Results</label>
                                                        <obs id="" conceptId="165289" answerConceptIds="1228,1229,1118,1175"/>
                                                    </div>
                                                </obsgroup>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-4">
                                        <div class="card">
                                            <div class="card-header">TB LAM</div>
                                            <div class="card-body">
                                                <obsgroup groupingConceptId="165416">
                                                    <div>
                                                        <label>TB LAM Results</label>
                                                        <obs id="" conceptId="165291"/>
                                                    </div>
                                                </obsgroup>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-4">
                                        <div class="card">
                                            <div class="card-header">Gene Xpert</div>
                                            <div class="card-body">
                                                <obsgroup groupingConceptId="165413">
                                                    <div>
                                                        <label>Gene xpert results</label>
                                                        <obs id="" conceptId="162202" answerConceptIds="703,664,1118"/>
                                                    </div>
                                                </obsgroup>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-4">
                                        <div class="card">
                                            <div class="card-header">Microscopy</div>
                                            <div class="card-body">
                                                <obsgroup groupingConceptId="165415">
                                                    <div>
                                                        <label>Microscopy Results</label>
                                                        <obs id="" conceptId="165414" answerConceptIds="703,664"/>
                                                    </div>
                                                </obsgroup>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-4">
                                        <div class="card">
                                            <div class="card-header">Viral Load</div>
                                            <div class="card-body">
                                                <obsgroup groupingConceptId="165412">
                                                    <div>
                                                        <label>Date Viral Load Taken</label>
                                                        <obs id="date-viral-load-taken" conceptId="163023"
                                                             allowFutureDates="false"/>
                                                    </div>
                                                    <div>
                                                        <label>Viral Load Results</label>
                                                        <obs id="viral-load-results-qualitative" conceptId="1305"
                                                             answerConceptIds="1301,1306,1304"
                                                             answerLabels="Detected,Not Detected, Sample Rejected"/>
                                                    </div>
                                                    <div>
                                                        <label>Viral Load (copies/ml)</label>
                                                        <obs id="viral-load-results-copies" conceptId="856"/>
                                                    </div>
                                                    <div>
                                                        <label>Viral Load Status</label>
                                                        <span id="viral-load-status"></span>
                                                    </div>
                                                </obsgroup>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>


                </div>
                <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
                    <div class="card" style="margin-top: 10px;">
                        <div class="card-header">Diagnosis</div>
                        <div class="card-body">
                            <encounterDiagnoses selectedDiagnosesTarget="#encounter-diagnoses-target"
                                                preferredCodingSource="ICD-10-WHO" diagnosisConceptClasses="Diagnosis"/>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="v-prescriptions" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                    <div class="row">
                        <div class="col-6">
                            <div class="card" style="margin-top:10px">
                                <div class="card-header">
                                    ART - ADHERENCE
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-12">
                                            <span class="AdherenceEnableDisable1">
                                <obs conceptId="90221" answerConceptIds="90156,90157,90158"
                                     answerLabels=" Good, Fair, Poor" labelText="Adhererence:"/>
                            </span>
                                            <span class="AdherenceEnableDisableChild1 lablex2">
                                Why Poor/Fair:
                                <br/>
                                <obs id="br" conceptId="90223" answerConceptId="90040" answerLabel="1 - Toxicity"/>
                                <obs id="br" conceptId="90223" answerConceptId="90146"
                                     answerLabel="2 - Share with others"/>
                                <obs id="br" conceptId="90223" answerConceptId="90147" answerLabel="3 - Forgot"/>
                                <obs id="br" conceptId="90223" answerConceptId="90148" answerLabel="4 - Felt better"/>
                                <obs id="br" conceptId="90223" answerConceptId="90149" answerLabel="5 - Too ill"/>
                                <obs id="br" conceptId="90223" answerConceptId="90150" answerLabel="6 - Stigma"/>
                                <obs id="br" conceptId="90223" answerConceptId="90045"
                                     answerLabel="7 - Drug Stock out"/>
                                <obs id="br" conceptId="90223" answerConceptId="90151" answerLabel="8 - Lost pills"/>
                                <obs id="br" conceptId="90223" answerConceptId="90152"
                                     answerLabel="9 - Travel problems"/>
                                <obs id="br" conceptId="90223" answerConceptId="90051"
                                     answerLabel="10 - Inability to pay"/>
                                <obs id="br" conceptId="90223" answerConceptId="90153" answerLabel="11 - Alcohol"/>
                                <obs id="br" conceptId="90223" answerConceptId="90154" answerLabel="12 - Depression"/>
                                <obs id="br" conceptId="90223" answerConceptId="90155" answerLabel="13 - Pill burden"/>
                                <obs id="br" conceptId="90223" answerConceptId="99049" answerLabel="14 - Lack of food"/>
                                <span id="trigger">
                                    <obs id="br" conceptId="90223" answerConceptId="90002"
                                         answerLabel="15 - Other Specify:"/>
                                </span>
                                <span id="disabled">
                                    <obs id="br" conceptId="99125" labelText="" size="21"/>
                                </span>
                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="card" style="margin-top:10px">
                                <div class="card-header">
                                    ARV - Regimens
                                </div>
                                <div class="card-body">
                                    <obsgroup groupingConceptId="165430">
                                        <div class="row">
                                            <div class="col-6">
                                                <obs id="90315" conceptId="90315" labelText="Regimen:"
                                                     answerConceptIds="99015,99016,99005,99006,164979,99039,99040,164977,99041,99042,99007,99008,99044,99043,99282,99283,99046,99017,99018,99019,99045,99284,99285,99286,99884,99885,164978,99888,163017,99887,90002"
                                                     answerLabels="d4T-3TC-NVP,d4T-3TC-EFV,AZT-3TC-NVP,AZT-3TC-EFV,AZT-3TC-DTG,TDF-3TC-NVP,TDF-3TC-EFV,TDF-3TC-DTG,TDF-FTC-NVP,TDF-FTC-EFV,ABC-ddI(250)-LPV/r,ABC-ddI(400)-LPV/r,TDF-3TC-LPV/r,TDF-FTC-LPV/r,ZDV-ddI(250)-LPV/r,ZDV-ddI(400)-LPV/r,AZT-3TC-LPV/r,ABC-ddI-LPV/r,ABC-ddI-NFV,ABC-ddI-SQV/r,ZDV-ddI-LPV/r,AZT-ABC-LPV/r,ABC-ddI-ATV/r,AZT-3TC-ATV/r,ABC-3TC-NVP,ABC-3TC-EFV,ABC-3TC-DTG,ABC-3TC-ATV/r,ABC-3TC-LPV/r,TDF-3TC-ATV/r,Other"/>
                                            </div>
                                            <div class="col-3">
                                                <obs id="br" conceptId="99038" labelText="# Pills:"/>

                                            </div>
                                            <div class="col-3">
                                                <obs id="br" conceptId="99036" size="5" labelText="# Days:"/>
                                            </div>
                                        </div>
                                    </obsgroup>
                                </div>
                            </div>

                            <div class="card" style="margin-top:10px">
                                <div class="card-header">
                                    TPT/B6
                                </div>
                                <div class="card-body">
                                    <obsgroup groupingConceptId="165305">
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="row">
                                                    <div class="col-4">
                                                        <obs conceptId="1282" answerConceptSetIds="160021" style="radio"
                                                             answerConceptIds="78280" class="fullwidth"/>
                                                    </div>

                                                    <div class="col-4">
                                                        <label>No. of Pills:</label>
                                                        <obs conceptId="160856"/>
                                                    </div>

                                                    <div class="col-4 duration">
                                                        <label>No. of Days</label>
                                                        <obs conceptId="159368"/>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-4">
                                                        <obs conceptId="1282" answerConceptSetIds="160021" style="radio"
                                                             answerConceptIds="82912" answerLabels="Vitamin B6"
                                                             class="fullwidth"/>
                                                    </div>
                                                    <div class="col-4">
                                                        <label>No. of Pills:</label>
                                                        <obs conceptId="160856"/>
                                                    </div>

                                                    <div class="col-4 duration">
                                                        <label>No. of Days</label>
                                                        <obs conceptId="159368"/>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-4"></div>
                                                    <div class="col-8">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </obsgroup>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="card" style="margin-top:10px">
                                <div class="card-header">
                                    CTX/DAPSONE (ANTI-BIOTICS)
                                </div>
                                <div class="card-body">
                                    <obsgroup groupingConceptId="165304">
                                        <div class="row">
                                            <div class="col-5">
                                                <br/>
                                                <obs conceptId="1282" class="horizontal" answerConceptSetIds="1157"
                                                     answerConceptIds="92,90168" style="radio"/>
                                            </div>
                                            <div class="col-3">
                                                <obs labelText="Number of Pills" conceptId="160856"/>
                                            </div>

                                            <div class="col-3 duration">
                                                <label>Number of Days</label>
                                                <obs conceptId="159368"/>
                                            </div>
                                        </div>
                                    </obsgroup>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="card" style="margin-top:10px">
                                <div class="card-header">
                                    FLUCONAZOLE - (ANTI-FUNGAL)
                                </div>
                                <div class="card-body">
                                    <obsgroup groupingConceptId="165306">
                                        <div class="row">
                                            <div class="col-3">
                                                <br/>
                                                <obs conceptId="1282" answerConceptSetIds="165308"
                                                     answerConceptIds="747" style="radio" class="horizontal"/>
                                            </div>
                                            <div class="col-2">
                                                <obs labelText="No. of Pills" conceptId="160856"/>
                                            </div>
                                            <div class="col-2 duration">
                                                <obs conceptId="159368" labelText="No. of Days"/>
                                            </div>

                                            <div class="col-2">
                                                <obs id="br" conceptId="1190" labelText="Start Date"/>
                                            </div>
                                            <div class="col-2">
                                                <obs id="br" conceptId="1191" labelText="Stop Date"/>
                                            </div>
                                        </div>
                                    </obsgroup>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="card" style="margin-top:10px">
                                <div class="card">
                                    <div class="card-header">
                                        <label>OTHER MEDICATIONS</label>
                                    </div>
                                    <div class="card-body">
                                        <div>
                                            <repeat>
                                                <template>
                                                    <obsgroup groupingConceptId="160741">
                                                        <div class="row multi-drug" id="{id}-toggleContainer">
                                                            <div class="col-2">
                                                                <obs labelText="Drug" conceptId="1282"
                                                                     answerConceptSetIds="1157,1158,1159,1195,1197,5279,5839"
                                                                     style="autocomplete" class="fullwidth"/>
                                                            </div>
                                                            <div class="col-2">
                                                                <obs labelText="Units per dose" conceptId="160856"/>
                                                            </div>
                                                            <div class="col-2">
                                                                <obs labelText="Doses per day" conceptId="160855"/>
                                                            </div>
                                                            <div class="col-2 duration">
                                                                <label>Duration</label>
                                                                <obs conceptId="159368"/>
                                                            </div>
                                                            <div class="col-2">
                                                                <br/>
                                                                <obs conceptId="1732"/>
                                                            </div>
                                                            <div class="col-2">
                                                                <div style="font-size: 25px;margin-top: 26px;">
                                                                    <a href="#" id="{id}-addEntry"
                                                                       class="addEntry add-more-link"><i
                                                                            class="icon-plus-sign"></i></a> <a href="#"
                                                                                                               class="removeEntry remove-more-link"
                                                                                                               id="{id}-removeEntry">
                                                                    <i class="icon-minus"> </i></a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </obsgroup>
                                                </template>
                                                <render id="1"/>
                                                <render id="2"/>
                                                <render id="3"/>
                                                <render id="4"/>
                                                <render id="5"/>
                                                <render id="6"/>
                                                <render id="7"/>
                                                <render id="8"/>
                                                <render id="9"/>
                                                <render id="10"/>
                                            </repeat>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="tab-pane fade" id="v-hiv-programing" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                    <div class="card" style="margin-top:10px">
                        <div class="card" style="margin-top:10px">
                            <div class="card-header">
                                <label>DSDM</label>
                            </div>
                            <div class="card-body">
                                <div class="" style="display:none">
                                    <uiInclude provider="aijar" fragment="patientStability"/>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <obs id="165144" conceptId="165144" answerConceptIds="90003,90004"
                                             answerLabels="Stable,UnStable"
                                             defaultValue="90004" labelText="Patient categorisation"/>
                                    </div>
                                    <div class="col-6">
                                        <div class="form-group">
                                            <obs id="165143" conceptId="165143"
                                                 answerConceptIds="165138,165140,165139,165142,165141"
                                                 answerLabels="FBIM,FBG,FTR,CDDP,CCLAD" required="required"
                                                 labelText="Approach"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" style="margin-top: 30px">
                                    <div class="col-4">
                                        <obs id="99024" conceptId="99024" labelText="Duration(Months since baseline):"/>
                                    </div>
                                    <div class="col-4">
                                        <obs id="99025" conceptId="99025"
                                             labelText="Duration:(Months on current regimen)"/>

                                    </div>
                                    <div class="col-4">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                    <div class="card" style="margin-top:10px">
                        <div class="card-header">
                            <label>Next Course of Action</label>
                        </div>
                        <div class="card-body">
                            <div class="final-out-come">
                                <div class="row" style="margin-top:30px">
                                    <div class="col-4">
                                        <excludeIf velocityTest="$patient.person.dead ==true">
                                            <lookup complexExpression="#set($transfer_out_date = '')"/>
                                            <span id="transfer_out_date_id" style="display: none">
                                                <lookup
                                                        complexExpression="#set($transfer_out_date=($fn.latestObs('99165').valueDatetime)) #set($lost_to_follow_date=$fn.latestObs('99165').valueDatetime) #set($transfer_out=$fn.latestObs('90306').valueCoded.name) $transfer_out_date"/>
                                            </span>
                                            <includeIf velocityTest="$transfer_out=='YES'">
                                                <obs id="returndate" conceptId="5096" allowFutureDates="true"
                                                     labelText="Return date:"/>
                                            </includeIf>

                                            <includeIf velocityTest="$transfer_out!='YES'">
                                                <obs id="returndate" conceptId="5096" required="required"
                                                     allowFutureDates="true"
                                                     labelText="Return date:"/>
                                            </includeIf>
                                        </excludeIf>
                                    </div>
                                    <div class="col-4">
                                        <obs id="reason_for_appointment" conceptId="160288"
                                             labelText="Reasons for next appointment:"
                                             answerConceptIds="164968,164972,164970,856,5497,163153,164971,164973,99324,164974,90012,903,5484,90002"
                                             answerLabels="1. ART Initiation, 2. ART Refill, 3. ART Regimen Switch/ Substitution, 4. Viral Load, 5. CD4, 6. IAC, 7. T.B Drug Refill,8. T.B Follow up, 9. ANC,10. EID,11. PMTCT, 12. Hypertension/ Diabetes, 13. Nutrition,14. Other Specify"/>
                                    </div>
                                    <div class="col-4">
                                        <obs conceptId="164975" labelText="Other Reason for next appointment"/>
                                    </div>
                                </div>
                                <obsgroup groupingConceptId="99166">
                                    <div class="row">
                                        <div class="col-4" id="final-out-come">
                                            <obs id="90306" conceptId="90306" answerConceptId="90003"
                                                 answerLabel="Transfer out"/>
                                        </div>
                                        <div class="col-4" id="disabled">
                                            <obs id="99165" conceptId="99165" labelText="Date of Transfer"/>
                                        </div>
                                        <div class="col-4" id="disabled">
                                            <obs conceptId="90211" labelText="Where"/>
                                        </div>
                                    </div>
                                </obsgroup>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</htmlform>